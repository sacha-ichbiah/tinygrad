
<!DOCTYPE html>
<html>
<head>
    <title>Double Pendulum - TinyPhysics</title>
    <style>
        body {
            font-family: monospace;
            background: #111;
            color: #eee;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        canvas { border: 1px solid #333; background: #000; }
        .info {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 5px;
            margin: 10px;
            max-width: 500px;
        }
        code { color: #4f4; }
    </style>
</head>
<body>
    <h1>Double Pendulum - Physics Compiled from Energy</h1>
    <div class="info">
        <p>Define ONLY the Hamiltonian:</p>
        <code>H = 0.5 * p^T * M(q)^-1 * p + V(q)</code>
        <p>Non-separable system - autograd handles complex derivatives!</p>
    </div>
    <canvas id="simCanvas" width="600" height="600"></canvas>
    <script>
        const history = [[1.5707963705062866, 0.0], [1.5217376947402954, 0.0011916613439098], [1.3739930391311646, 0.019258728250861168], [1.1210801601409912, 0.09910282492637634], [0.7289072275161743, 0.327662855386734], [0.1983635574579239, 0.7043367624282837], [-0.24882403016090393, 0.8546555042266846], [-0.6071300506591797, 0.7514440417289734], [-0.8658759593963623, 0.46410199999809265], [-0.9752943515777588, 0.0558025948703289], [-0.8836928606033325, -0.4716300666332245], [-0.6136846542358398, -1.113708734512329], [-0.41277408599853516, -1.5955535173416138], [-0.27495214343070984, -1.9269559383392334], [-0.14530646800994873, -2.1478192806243896], [0.007328798994421959, -2.258260488510132], [0.19526660442352295, -2.247755289077759], [0.40792688727378845, -2.1153411865234375], [0.6134991645812988, -1.8781580924987793], [0.7685489654541016, -1.5664865970611572], [0.8299140930175781, -1.2107325792312622], [0.7650909423828125, -0.8153771758079529], [0.5342146158218384, -0.31859588623046875], [0.057415563613176346, 0.43382930755615234], [-0.3056347072124481, 1.0187660455703735], [-0.5045127868652344, 1.3983304500579834], [-0.6180911660194397, 1.6818145513534546], [-0.6718290448188782, 1.9007689952850342], [-0.6760622262954712, 2.0674781799316406], [-0.6359638571739197, 2.188323497772217], [-0.5575798749923706, 2.264122486114502], [-0.4520149230957031, 2.287144184112549], [-0.33497101068496704, 2.24137806892395], [-0.21865013241767883, 2.1104776859283447], [-0.10009757429361343, 1.8864350318908691], [0.04418397694826126, 1.562100887298584], [0.2658463716506958, 1.0978147983551025], [0.6429027318954468, 0.3933795690536499], [0.8876546025276184, -0.2259783148765564], [0.8996062874794006, -0.6960398554801941], [0.7425868511199951, -1.0920372009277344], [0.47443291544914246, -1.379855751991272], [0.16075310111045837, -1.499881625175476], [-0.1650429517030716, -1.4216824769973755], [-0.5293382406234741, -1.1238524913787842], [-0.9619802236557007, -0.6115509867668152], [-1.2444864511489868, -0.2009696662425995], [-1.3548336029052734, 0.10700033605098724], [-1.3256630897521973, 0.38253816962242126], [-1.1699635982513428, 0.6258648037910461], [-0.9110580682754517, 0.7891366481781006], [-0.5763511657714844, 0.8033454418182373], [-0.1548084169626236, 0.5921698212623596], [0.4168400466442108, 0.08537458628416061], [0.8708308935165405, -0.2744278609752655], [1.1737616062164307, -0.41986045241355896], [1.3806031942367554, -0.4606188237667084], [1.496492624282837, -0.45471182465553284], [1.5170100927352905, -0.43462935090065], [1.4408161640167236, -0.4062815010547638], [1.270156741142273, -0.3479350805282593], [1.0012141466140747, -0.21023282408714294], [0.5917850136756897, 0.1035512238740921], [0.024457048624753952, 0.613766074180603], [-0.41969671845436096, 0.8630051612854004], [-0.7736229300498962, 0.86347496509552], [-1.0560284852981567, 0.6916921138763428], [-1.2352633476257324, 0.41884365677833557], [-1.2797224521636963, 0.09935306012630463], [-1.1688472032546997, -0.26707518100738525], [-0.8615219593048096, -0.7624456882476807], [-0.4627373516559601, -1.2771592140197754], [-0.14606153964996338, -1.5614204406738281], [0.14880648255348206, -1.6525986194610596], [0.4459150731563568, -1.5604063272476196], [0.7179344892501831, -1.3051481246948242], [0.9035536050796509, -0.9411574006080627], [0.9450936317443848, -0.5172508955001831], [0.797290563583374, -0.010175991803407669], [0.400443971157074, 0.7043095827102661], [0.0632345899939537, 1.2836949825286865], [-0.1434471607208252, 1.6529560089111328], [-0.30128103494644165, 1.9002913236618042], [-0.44261178374290466, 2.045616626739502], [-0.5739914774894714, 2.09981107711792], [-0.6843506097793579, 2.0808918476104736], [-0.7579678893089294, 2.0068886280059814], [-0.7837862968444824, 1.8870997428894043], [-0.7561577558517456, 1.7211999893188477], [-0.6706241369247437, 1.5008904933929443], [-0.5163722038269043, 1.2073644399642944], [-0.2587732970714569, 0.790582537651062], [0.2060386687517166, 0.10099753737449646], [0.6185144782066345, -0.5454062819480896], [0.8091211915016174, -0.9693056344985962], [0.8630322217941284, -1.318834662437439], [0.8073973655700684, -1.6328489780426025], [0.6688988208770752, -1.904650092124939], [0.48211026191711426, -2.1091790199279785], [0.28284183144569397, -2.2195873260498047], [0.09990718960762024, -2.216273784637451], [-0.05589692294597626, -2.0948832035064697], [-0.19700084626674652, -1.8617379665374756], [-0.35715240240097046, -1.5120831727981567], [-0.5998303294181824, -0.9924376606941223], [-0.8978896141052246, -0.3289739787578583], [-0.9848198294639587, 0.1854199320077896], [-0.8748475909233093, 0.5935248136520386], [-0.6205042600631714, 0.89059978723526], [-0.27679508924484253, 1.013120412826538], [0.13398641347885132, 0.8995099067687988], [0.6468548774719238, 0.508948564529419], [1.076356053352356, 0.162850484251976], [1.341658353805542, -0.011274394579231739], [1.4931954145431519, -0.11512156575918198], [1.542662262916565, -0.19883020222187042], [1.491198182106018, -0.27780619263648987], [1.3413218259811401, -0.336873322725296], [1.0977286100387573, -0.3328176438808441], [0.7514442205429077, -0.19529257714748383], [0.23818491399288177, 0.19309702515602112], [-0.30618953704833984, 0.5965331196784973], [-0.7061487436294556, 0.7022385001182556], [-1.0194913148880005, 0.6057719588279724], [-1.2368957996368408, 0.3852066993713379], [-1.3309251070022583, 0.10514204204082489], [-1.2837340831756592, -0.2102201282978058], [-1.070613145828247, -0.6034644842147827], [-0.6871840357780457, -1.112629771232605], [-0.3366619646549225, -1.4621483087539673], [-0.027203042060136795, -1.601185917854309], [0.279777854681015, -1.5479663610458374], [0.5683655738830566, -1.3141077756881714], [0.7782760858535767, -0.9452198147773743], [0.8414745926856995, -0.4919518828392029], [0.6971836686134338, 0.07161500304937363], [0.32102420926094055, 0.8254214525222778], [0.06521022319793701, 1.3862318992614746], [-0.06953668594360352, 1.7780972719192505], [-0.15263792872428894, 2.0736770629882812], [-0.2182236611843109, 2.2885663509368896], [-0.28286081552505493, 2.427421808242798], [-0.34727928042411804, 2.500166416168213], [-0.4023279845714569, 2.521800994873047], [-0.4379992187023163, 2.5046253204345703], [-0.4490109980106354, 2.452911615371704], [-0.4359481930732727, 2.361974000930786], [-0.4027765989303589, 2.2205255031585693], [-0.3503361642360687, 2.0164077281951904], [-0.2685467302799225, 1.7406781911849976], [-0.13167408108711243, 1.3781839609146118], [0.1170664131641388, 0.8690588474273682], [0.5463382005691528, 0.10715337842702866], [0.7922593355178833, -0.4952058792114258], [0.8187506794929504, -0.9593098163604736], [0.6878246068954468, -1.3642590045928955], [0.45352134108543396, -1.6863445043563843], [0.18242458999156952, -1.8739360570907593], [-0.07650125026702881, -1.8992143869400024], [-0.3126581311225891, -1.7667514085769653], [-0.5513625741004944, -1.4815170764923096], [-0.8455263376235962, -1.01212477684021], [-1.1128501892089844, -0.47487637400627136], [-1.186776876449585, -0.05849770829081535], [-1.0906182527542114, 0.2830698490142822], [-0.8543626666069031, 0.5362184643745422], [-0.5105946660041809, 0.6340556740760803], [-0.06145499274134636, 0.4914896786212921], [0.5029089450836182, 0.10246822983026505], [0.9391719102859497, -0.11632367223501205], [1.238579511642456, -0.1433505266904831], [1.4338555335998535, -0.07502493262290955], [1.5264532566070557, 0.030301349237561226], [1.5146390199661255, 0.14478783309459686], [1.3961869478225708, 0.27323418855667114], [1.1574537754058838, 0.457815945148468], [0.7615591883659363, 0.7746038436889648], [0.3095499575138092, 1.0686020851135254], [-0.07591802626848221, 1.1197075843811035], [-0.40422889590263367, 0.9448822140693665], [-0.6346762776374817, 0.5879985690116882], [-0.6964313983917236, 0.08743080496788025], [-0.5266276001930237, -0.5904293060302734], [-0.33185142278671265, -1.237707257270813], [-0.27009883522987366, -1.697821021080017], [-0.27033618092536926, -2.0467307567596436], [-0.28211286664009094, -2.3089308738708496], [-0.27118217945098877, -2.4875521659851074], [-0.21597033739089966, -2.578218460083008], [-0.10749217867851257, -2.5732243061065674], [0.049436718225479126, -2.465857982635498], [0.23468074202537537, -2.2559943199157715], [0.4125768840312958, -1.954642415046692], [0.5353129506111145, -1.583911418914795], [0.5540459156036377, -1.1609541177749634], [0.4218378961086273, -0.6573414206504822], [0.04628928378224373, 0.07710827887058258], [-0.32225921750068665, 0.7962472438812256], [-0.46264100074768066, 1.2861716747283936], [-0.46841365098953247, 1.6925451755523682], [-0.3836909532546997, 2.0473129749298096], [-0.24905534088611603, 2.3434834480285645], [-0.10191314667463303, 2.5688352584838867], [0.0295804962515831, 2.7174930572509766], [0.1263163983821869, 2.788128137588501], [0.17696154117584229, 2.7807536125183105], [0.17805218696594238, 2.6951687335968018], [0.13517822325229645, 2.5305659770965576], [0.06521368771791458, 2.2867398262023926], [-0.0016295751556754112, 1.9657244682312012], [-0.02274772711098194, 1.5672731399536133], [0.057817503809928894, 1.06513249874115], [0.32849615812301636, 0.34879058599472046], [0.5773383975028992, -0.38173964619636536], [0.5726550817489624, -0.9130544066429138], [0.39862722158432007, -1.331998586654663], [0.13328969478607178, -1.6159573793411255], [-0.15319779515266418, -1.728507399559021], [-0.42827194929122925, -1.665548324584961], [-0.7024148106575012, -1.4348194599151611], [-1.0033098459243774, -1.0366055965423584], [-1.2347708940505981, -0.6156799793243408], [-1.3018590211868286, -0.2818966507911682], [-1.220984935760498, -0.0033088214695453644], [-1.007312536239624, 0.20446312427520752], [-0.6744440793991089, 0.27812278270721436], [-0.2087690383195877, 0.12506504356861115], [0.3489452600479126, -0.18592970073223114], [0.7758535742759705, -0.27172744274139404], [1.078201413154602, -0.15683917701244354], [1.2588709592819214, 0.07186029851436615], [1.3035190105438232, 0.361270934343338], [1.1961300373077393, 0.7105937004089355], [0.930806577205658, 1.1443626880645752], [0.6342118978500366, 1.5034936666488647], [0.3609853982925415, 1.6908398866653442], [0.0812128484249115, 1.7088626623153687], [-0.20523977279663086, 1.5491918325424194], [-0.4539948105812073, 1.2246345281600952], [-0.5897443890571594, 0.7752634286880493], [-0.5335538387298584, 0.20204496383666992], [-0.2293565273284912, -0.5803097486495972], [-0.023140260949730873, -1.2217340469360352], [0.01904669590294361, -1.6885396242141724], [-0.022172000259160995, -2.0640907287597656], [-0.09536463767290115, -2.3626198768615723], [-0.16090776026248932, -2.5824551582336426], [-0.19230034947395325, -2.722180128097534], [-0.17602857947349548, -2.7821667194366455], [-0.10921421647071838, -2.7626142501831055], [0.0021785609424114227, -2.6629796028137207], [0.14392003417015076, -2.483083724975586], [0.2928502857685089, -2.2256436347961426], [0.4154753088951111, -1.8999121189117432], [0.4704912304878235, -1.5192745923995972], [0.4161635637283325, -1.080128788948059], [0.19345718622207642, -0.5116521716117859], [-0.24835404753684998, 0.30153581500053406], [-0.4952692687511444, 0.9064754247665405], [-0.5482288002967834, 1.3669147491455078], [-0.47303223609924316, 1.768013834953308], [-0.3165609836578369, 2.1099424362182617], [-0.12970250844955444, 2.369598865509033], [0.044299155473709106, 2.5297842025756836], [0.17728351056575775, 2.585862874984741], [0.25707316398620605, 2.5423855781555176], [0.2861272394657135, 2.407388210296631], [0.27987736463546753, 2.1872286796569824], [0.2662019729614258, 1.883172869682312], [0.2865947186946869, 1.4845861196517944], [0.4042677879333496, 0.9431859254837036], [0.6339783072471619, 0.22753819823265076], [0.6856141090393066, -0.3570265471935272], [0.5308133363723755, -0.7879779934883118], [0.24398374557495117, -1.0608562231063843], [-0.11360318958759308, -1.1278879642486572], [-0.5300469994544983, -0.9535066485404968], [-0.9813215136528015, -0.6035304665565491], [-1.293852686882019, -0.3600071668624878], [-1.468453049659729, -0.21072880923748016], [-1.5320534706115723, -0.09109548479318619], [-1.4904863834381104, 0.021005650982260704], [-1.3451042175292969, 0.11346890777349472], [-1.097482681274414, 0.14266514778137207], [-0.7356389164924622, 0.03300388157367706], [-0.209096297621727, -0.31393152475357056], [0.30838555097579956, -0.6000252366065979], [0.69868004322052, -0.6052872538566589], [0.9898838996887207, -0.416176438331604], [1.1566433906555176, -0.11001977324485779], [1.1672097444534302, 0.26862913370132446], [0.9886050820350647, 0.7490652203559875], [0.677966833114624, 1.2892884016036987], [0.4222003221511841, 1.6553007364273071], [0.19187213480472565, 1.8593260049819946], [-0.053528934717178345, 1.9115492105484009], [-0.32148200273513794, 1.801654577255249], [-0.5808566212654114, 1.5396074056625366], [-0.7696872353553772, 1.1694480180740356], [-0.825685977935791, 0.7363287806510925], [-0.699295163154602, 0.22308208048343658], [-0.3147612512111664, -0.5090712904930115], [0.032256364822387695, -1.1495065689086914], [0.21339426934719086, -1.5709511041641235], [0.31746578216552734, -1.8864202499389648], [0.3813723921775818, -2.1251556873321533], [0.4224555790424347, -2.296663999557495], [0.44468367099761963, -2.411264419555664], [0.4448809027671814, -2.4812419414520264], [0.4204833507537842, -2.5147817134857178], [0.3739655613899231, -2.5118918418884277], [0.3134152889251709, -2.4637465476989746], [0.24913083016872406, -2.355846881866455], [0.18569795787334442, -2.1754207611083984], [0.1138196811079979, -1.9164283275604248], [0.007646788842976093, -1.5713552236557007], [-0.18183399736881256, -1.1020042896270752], [-0.5410265326499939, -0.39404645562171936], [-0.8055859804153442, 0.26504021883010864], [-0.8266381621360779, 0.7554288506507874], [-0.6755611300468445, 1.165451169013977], [-0.4141753911972046, 1.467140793800354], [-0.11136175692081451, 1.6050353050231934], [0.19404424726963043, 1.553817629814148], [0.5158472061157227, 1.306187629699707], [0.9029303193092346, 0.8395339250564575], [1.20614492893219, 0.378362774848938], [1.3240628242492676, 0.036045949906110764], [1.292250156402588, -0.2605934143066406], [1.1275919675827026, -0.5147844552993774], [0.8539913892745972, -0.6764918565750122], [0.49501967430114746, -0.6720183491706848], [0.023886915296316147, -0.4104170501232147], [-0.5504356026649475, 0.060173388570547104], [-0.9586254358291626, 0.29088324308395386], [-1.2441993951797485, 0.34212595224380493], [-1.4355130195617676, 0.3031352460384369], [-1.5304752588272095, 0.22833266854286194], [-1.525052547454834, 0.14564183354377747], [-1.418225646018982, 0.053122080862522125], [-1.2050697803497314, -0.08316852152347565], [-0.8546531200408936, -0.34209197759628296], [-0.3417813777923584, -0.7702270150184631], [0.10790392756462097, -1.0006929636001587], [0.4778773784637451, -0.9693120121955872], [0.7752866148948669, -0.7363344430923462], [0.9516684412956238, -0.36763662099838257], [0.9527699947357178, 0.09820526838302612], [0.7260411977767944, 0.7159339189529419], [0.43665811419487, 1.3257306814193726], [0.2564486265182495, 1.73481023311615], [0.11701890081167221, 2.015437602996826], [-0.025411119684576988, 2.18681001663208], [-0.1924418956041336, 2.243950843811035], [-0.38368114829063416, 2.1847407817840576], [-0.5775497555732727, 2.022123336791992], [-0.7408345341682434, 1.7799421548843384], [-0.8380184173583984, 1.4845534563064575], [-0.8383427262306213, 1.1535853147506714], [-0.7179387211799622, 0.7740153670310974], [-0.42937517166137695, 0.2617676258087158], [0.07993309944868088, -0.49778297543525696], [0.4176207482814789, -1.0220566987991333], [0.6099551916122437, -1.36757230758667], [0.7202756404876709, -1.6248276233673096], [0.7675743103027344, -1.822206735610962], [0.7593052983283997, -1.9710025787353516], [0.7011686563491821, -2.0743141174316406], [0.6023773550987244, -2.126997947692871], [0.4776749908924103, -2.114516258239746], [0.3423153758049011, -2.017829418182373], [0.19961868226528168, -1.8237817287445068], [0.0312153659760952, -1.5228031873703003], [-0.21253876388072968, -1.0760855674743652], [-0.616416871547699, -0.37825852632522583], [-0.8941738605499268, 0.23678423464298248], [-0.9408141374588013, 0.698127806186676], [-0.8189392685890198, 1.096994400024414], [-0.5780536532402039, 1.4117403030395508], [-0.2825924754142761, 1.5825494527816772], [0.02099318616092205, 1.5711692571640015], [0.3348449468612671, 1.3669849634170532], [0.7167007923126221, 0.9336636066436768], [1.0946986675262451, 0.40143483877182007], [1.2741273641586304, 0.01855069398880005], [1.292462706565857, -0.3009154200553894], [1.1712923049926758, -0.5863016247749329], [0.9338834881782532, -0.8028552532196045], [0.6144974231719971, -0.8831513524055481], [0.2241743952035904, -0.7575072050094604], [-0.3012530207633972, -0.33276140689849854], [-0.8105342984199524, 0.1180291399359703], [-1.1377973556518555, 0.3255833685398102], [-1.35591721534729, 0.4143509268760681], [-1.4805619716644287, 0.4509846866130829], [-1.5099934339523315, 0.4706859588623047], [-1.4430959224700928, 0.4818345904350281], [-1.2833729982376099, 0.4654577076435089], [-1.033204197883606, 0.3775145709514618], [-0.67029869556427, 0.14169175922870636], [-0.11977030336856842, -0.35809847712516785], [0.3778374195098877, -0.7331794500350952], [0.7483923435211182, -0.8277249932289124], [1.0470755100250244, -0.7381698489189148], [1.2597849369049072, -0.5341380834579468], [1.3581737279891968, -0.27787545323371887], [1.325657844543457, 0.0024634376168251038], [1.1467127799987793, 0.33435386419296265], [0.7766315340995789, 0.8119828104972839], [0.35485655069351196, 1.2576756477355957], [0.010615013539791107, 1.4577562808990479], [-0.3120500445365906, 1.448811411857605], [-0.6124099493026733, 1.2505548000335693], [-0.838517427444458, 0.9096300005912781], [-0.925639271736145, 0.4837994873523712], [-0.8207526803016663, -0.030595827847719193], [-0.4685845673084259, -0.7387869358062744], [-0.1604122817516327, -1.3291466236114502], [0.020364053547382355, -1.717799186706543], [0.15341414511203766, -1.9902129173278809], [0.2752944827079773, -2.164511203765869], [0.3995599150657654, -2.245535135269165], [0.5203943252563477, -2.2453525066375732], [0.6217491626739502, -2.1815996170043945], [0.6885665655136108, -2.067293167114258], [0.7108176946640015, -1.9069253206253052], [0.681149959564209, -1.6983168125152588], [0.590172290802002, -1.432843565940857], [0.4188535809516907, -1.0864344835281372], [0.11109829694032669, -0.5799688100814819], [-0.3911385238170624, 0.18621641397476196], [-0.6928999423980713, 0.7322422862052917], [-0.8126538991928101, 1.1326549053192139], [-0.8050428628921509, 1.482278823852539], [-0.6972355842590332, 1.7949081659317017], [-0.5239754319190979, 2.0507397651672363], [-0.32440346479415894, 2.2219390869140625], [-0.1332668662071228, 2.2857987880706787], [0.028293944895267487, 2.2324116230010986], [0.16041092574596405, 2.0665342807769775], [0.28379759192466736, 1.7952351570129395], [0.4385001063346863, 1.404926061630249], [0.6906313300132751, 0.8302854299545288], [0.9260119199752808, 0.19546446204185486], [0.9375680088996887, -0.2850370407104492], [0.767753541469574, -0.6592147350311279], [0.4708574414253235, -0.8942829966545105], [0.0933474525809288, -0.9240343570709229], [-0.373918741941452, -0.6852966547012329], [-0.8802841901779175, -0.2929062247276306], [-1.2206989526748657, -0.08335559815168381], [-1.4325062036514282, 0.01121770590543747], [-1.5411194562911987, 0.0638413056731224], [-1.5505757331848145, 0.10767003893852234], [-1.4613311290740967, 0.1455790400505066], [-1.2744152545928955, 0.15136365592479706], [-0.9846855401992798, 0.06958088278770447], [-0.5509945750236511, -0.19894614815711975], [0.006627261638641357, -0.613739550113678], [0.44663792848587036, -0.7637210488319397], [0.7935143709182739, -0.6719560027122498], [1.0422292947769165, -0.417555034160614], [1.1544500589370728, -0.06928479671478271], [1.096123218536377, 0.3528287708759308], [0.8325985074043274, 0.905957043170929], [0.5220959186553955, 1.4199658632278442], [0.2833826243877411, 1.7387101650238037], [0.057224735617637634, 1.9050188064575195], [-0.1884164661169052, 1.9198477268218994], [-0.45155492424964905, 1.7774171829223633], [-0.6936503648757935, 1.4991260766983032], [-0.854572594165802, 1.1336009502410889], [-0.8816096782684326, 0.7196539044380188], [-0.734123945236206, 0.23254115879535675], [-0.3342427909374237, -0.4733204245567322], [0.048483047634363174, -1.1086150407791138], [0.26601383090019226, -1.508354902267456], [0.4113102853298187, -1.7886688709259033], [0.5191277265548706, -1.980906367301941], [0.5999509692192078, -2.0988597869873047], [0.6504153609275818, -2.1571853160858154], [0.663722038269043, -2.168177604675293], [0.6376699805259705, -2.135175943374634], [0.5764662027359009, -2.05096697807312], [0.4863271415233612, -1.9016157388687134], [0.36576712131500244, -1.6732349395751953], [0.19590365886688232, -1.348497748374939], [-0.07651890814304352, -0.8710232377052307], [-0.5313993692398071, -0.1285276859998703], [-0.8169144988059998, 0.4630485773086548], [-0.8870040774345398, 0.9081655144691467], [-0.8014694452285767, 1.3026137351989746], [-0.6020616292953491, 1.6383098363876343], [-0.34703361988067627, 1.8671114444732666], [-0.09071248769760132, 1.9490381479263306], [0.14213290810585022, 1.8757002353668213], [0.36254820227622986, 1.6559300422668457], [0.6140827536582947, 1.2757232189178467], [0.9369354248046875, 0.7071530222892761], [1.1292647123336792, 0.1993238925933838], [1.1235309839248657, -0.19752363860607147]];
        const l1 = 1.0 * 100;
        const l2 = 1.0 * 100;
        const canvas = document.getElementById('simCanvas');
        const ctx = canvas.getContext('2d');
        const cx = canvas.width / 2;
        const cy = canvas.height / 3;

        let frame = 0;

        function draw() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            const angles = history[frame];
            const t1 = angles[0];
            const t2 = angles[1];

            const x1 = cx + l1 * Math.sin(t1);
            const y1 = cy + l1 * Math.cos(t1);
            const x2 = x1 + l2 * Math.sin(t2);
            const y2 = y1 + l2 * Math.cos(t2);

            // Rods
            ctx.strokeStyle = '#fff';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(cx, cy);
            ctx.lineTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.stroke();

            // Masses
            ctx.fillStyle = '#f00';
            ctx.beginPath();
            ctx.arc(x1, y1, 8, 0, 2*Math.PI);
            ctx.fill();

            ctx.fillStyle = '#0f0';
            ctx.beginPath();
            ctx.arc(x2, y2, 8, 0, 2*Math.PI);
            ctx.fill();

            frame = (frame + 1) % history.length;
            requestAnimationFrame(draw);
        }

        draw();
    </script>
</body>
</html>
    