
<!DOCTYPE html>
<html>
<head>
    <title>TinyPhysics Harmonic Oscillator</title>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; alignItems: center; justify-content: center; height: 100vh; margin: 0; background: #111; color: #eee; }
        canvas { background: #222; border: 1px solid #444; }
        .controls { margin-top: 10px; }
        button { padding: 8px 16px; font-size: 16px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Harmonic Oscillator (Symplectic)</h1>
    <canvas id="simCanvas" width="600" height="400"></canvas>
    <div class="controls">
        <button onclick="toggleAnimation()">Pause/Play</button>
        <button onclick="resetAnimation()">Reset</button>
    </div>
    <p>Step: <span id="stepDisplay">0</span> | q: <span id="qDisplay">0.00</span> | p: <span id="pDisplay">0.00</span></p>

    <script>
        const qData = [0.9900000095367432, 0.9700999855995178, 0.9404990077018738, 0.9014930129051208, 0.853472113609314, 0.7969164848327637, 0.7323916554450989, 0.660542905330658, 0.5820887684822083, 0.49781373143196106, 0.40856054425239563, 0.31522175669670105, 0.21873074769973755, 0.12005243450403214, 0.02017359435558319, -0.07990697771310806, -0.17918848991394043, -0.2766781151294708, -0.37140095233917236, -0.4624097943305969, -0.5487945079803467, -0.6296913027763367, -0.7042911648750305, -0.7718481421470642, -0.8316866159439087, -0.8832082152366638, -0.9258977770805359, -0.9593283534049988, -0.9831656217575073, -0.9971712231636047, -1.0012050867080688, -0.9952269196510315, -0.9792965054512024, -0.9535731077194214, -0.9183139801025391, -0.8738717436790466, -0.8206907510757446, -0.7593028545379639, -0.6903219223022461, -0.6144378185272217, -0.5324093103408813, -0.4450567066669464, -0.3532535433769226, -0.2579178214073181, -0.1600029468536377, -0.06048803776502609, 0.03963175415992737, 0.13935524225234985, 0.2376851737499237, 0.3336382508277893, 0.42625492811203003, 0.5146090984344482, 0.5978171229362488, 0.675046980381012, 0.7455263733863831, 0.8085505366325378, 0.8634891510009766, 0.9097929000854492, 0.9469987154006958, 0.9747345447540283, 0.9927230477333069, 1.0007842779159546, 0.9988377094268799, 0.9869027137756348, 0.9650987386703491, 0.9336437582969666, 0.8928523063659668, 0.8431323766708374, 0.7849811315536499, 0.718980073928833, 0.6457892060279846, 0.5661404132843018, 0.48083025217056274, 0.39071178436279297, 0.29668617248535156, 0.1996937096118927, 0.10070431977510452, 0.0007078796625137329, -0.09929563850164413, -0.19830620288848877, -0.29533371329307556, -0.3894078731536865, -0.47958797216415405, -0.5649721622467041, -0.644706666469574, -0.7179940938949585, -0.7841015458106995, -0.8423680067062378, -0.8922107815742493, -0.9331314563751221, -0.9647207856178284, -0.9866629242897034, -0.9987384676933289, -1.0008265972137451, -0.9929064512252808, -0.9750572443008423, -0.947457492351532, -0.9103831648826599, -0.864205002784729, -0.8093847632408142];
        const pData = [-0.10000000149011612, -0.19900000095367432, -0.29601001739501953, -0.3900599181652069, -0.48020923137664795, -0.5655564665794373, -0.6452481150627136, -0.7184872627258301, -0.7845415472984314, -0.8427504301071167, -0.8925318121910095, -0.9333878755569458, -0.9649100303649902, -0.9867830872535706, -0.9987883567810059, -1.0008057355880737, -0.9928150177001953, -0.9748961925506592, -0.9472283720970154, -0.910088300704956, -0.8638473153114319, -0.8089678883552551, -0.745998740196228, -0.6755696535110474, -0.5983848571777344, -0.5152161717414856, -0.4268953502178192, -0.3343055844306946, -0.23837274312973022, -0.14005617797374725, -0.04033905267715454, 0.059781454503536224, 0.15930414199829102, 0.25723379850387573, 0.3525910973548889, 0.44442248344421387, 0.5318096876144409, 0.6138787865638733, 0.6898090839385986, 0.7588412761688232, 0.8202850818634033, 0.8735260367393494, 0.9180316925048828, 0.9533570408821106, 0.979148805141449, 0.9951490759849548, 1.0011979341506958, 0.9972347617149353, 0.9832992553710938, 0.9595307111740112, 0.9261668920516968, 0.8835414052009583, 0.8320804834365845, 0.7722987532615662, 0.7047940492630005, 0.6302413940429688, 0.5493863224983215, 0.4630374014377594, 0.37205809354782104, 0.2773582339286804, 0.17988477647304535, 0.08061247318983078, -0.01946595311164856, -0.11934972554445267, -0.21803998947143555, -0.31454986333847046, -0.40791425108909607, -0.49719947576522827, -0.5815126895904541, -0.660010814666748, -0.7319087982177734, -0.7964876890182495, -0.8531017303466797, -0.9011847376823425, -0.9402559399604797, -0.9699245691299438, -0.989893913269043, -0.9999643564224243, -1.0000351667404175, -0.9901056289672852, -0.9702749848365784, -0.9407415986061096, -0.901800811290741, -0.85384202003479, -0.7973448038101196, -0.7328741550445557, -0.6610747575759888, -0.5826646089553833, -0.4984278082847595, -0.40920671820640564, -0.3158935606479645, -0.21942147612571716, -0.12075518071651459, -0.020881332457065582, 0.07920132577419281, 0.1784919798374176, 0.27599769830703735, 0.37074345350265503, 0.461781769990921, 0.5482022762298584];
        const dt = 0.1;
        
        const canvas = document.getElementById('simCanvas');
        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const height = canvas.height;
        const centerX = width / 2;
        const centerY = height / 2;
        const scale = 100; // Pixels per unit
        
        let frame = 0;
        let running = true;
        let animationId;

        function draw() {
            ctx.clearRect(0, 0, width, height);

            // Draw axis
            ctx.strokeStyle = '#444';
            ctx.beginPath();
            ctx.moveTo(0, centerY);
            ctx.lineTo(width, centerY);
            ctx.stroke();

            // Draw Spring
            const x = qData[frame] * scale;
            ctx.strokeStyle = '#888';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            // Simple zig-zag for spring
            const segments = 10;
            const springWidth = 10;
            for(let i=0; i<=segments; i++) {
                const xPos = centerX + (x / segments) * i;
                const offset = (i%2 === 0 ? -1 : 1) * springWidth * (i>0 && i<segments ? 1 : 0);
                ctx.lineTo(xPos, centerY + offset);
            }
            ctx.stroke();

            // Draw Mass
            ctx.fillStyle = '#00ccff';
            ctx.beginPath();
            ctx.arc(centerX + x, centerY, 15, 0, Math.PI * 2);
            ctx.fill();

            // Update Stats
            document.getElementById('stepDisplay').innerText = frame;
            document.getElementById('qDisplay').innerText = qData[frame].toFixed(4);
            document.getElementById('pDisplay').innerText = pData[frame].toFixed(4);

            if (running) {
                frame++;
                if (frame >= qData.length) frame = 0;
                animationId = setTimeout(() => requestAnimationFrame(draw), 20); // Slow down slightly
            }
        }

        function toggleAnimation() {
            running = !running;
            if (running) draw();
        }

        function resetAnimation() {
            frame = 0;
            if (!running) {
                running = true;
                draw();
            }
        }

        draw();
    </script>
</body>
</html>
    